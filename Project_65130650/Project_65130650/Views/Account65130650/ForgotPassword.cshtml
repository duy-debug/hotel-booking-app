@model Project_65130650.Models.Forms.ForgotPasswordForm65130650

@{
    ViewBag.Title = "Quên mật khẩu";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="flex justify-center items-center min-h-[70vh] py-12">
    <div class="auth-card" style="max-width: 480px; width: 100%;">
        @* Phần đầu của thẻ xác thực: Logo và Tiêu đề *@
        <div class="auth-card_header">
            <div class="auth-card_logo">
                <i class="fas fa-key"></i>
            </div>
            <div>
                <h1>Quên Mật Khẩu</h1>
                <p>Nhập email của bạn để nhận mã xác nhận khôi phục</p>
            </div>
        </div>

        @* Hiển thị thông báo thành công khi mã đã được gửi đi *@
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6 flex items-center gap-3">
                <i class="fas fa-check-circle"></i>
                <span>@TempData["SuccessMessage"]</span>
            </div>
        }

        @using (Html.BeginForm("ForgotPassword", "Account65130650", FormMethod.Post, new { @class = "auth-form" }))
        {
            @Html.AntiForgeryToken()

            @* 
                Hiển thị tóm tắt các lỗi hệ thống (VD: Email không tồn tại) 
                Lỗi validation của từng ô (như trống email) sẽ hiện ở ValidationMessageFor phía dưới
            *@
            if (!ViewData.ModelState.IsValid && ViewData.ModelState[""] != null && ViewData.ModelState[""].Errors.Count > 0)
            {
                <div class="auth-validation" style="display: block; background: rgba(239, 68, 68, 0.1); border: 1px solid #fecaca; padding: 12px; border-radius: 12px; margin-bottom: 20px;">
                    @Html.ValidationSummary(true, "", new { @style = "list-style: none; padding: 0; margin: 0; color: #dc2626; font-size: 13px;" })
                </div>
            }

            @* Nhập địa chỉ Email *@
            <div class="form-group">
                <label>Email đã đăng ký <span style="color: red;">*</span></label>
                <div class="input-wrapper">
                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "example@email.com" })
                    <i class="fas fa-envelope input-icon"></i>
                </div>
                @Html.ValidationMessageFor(m => m.Email, "", new { @class = "field-validation-error" })
            </div>

            <button type="submit" class="btn-primary" style="width: 100%; margin-top: 10px;">
                <i class="fas fa-paper-plane"></i> Gửi Mã Xác Nhận
            </button>
            
            @* Đường dẫn quay lại trang chủ nếu người dùng nhớ ra mật khẩu *@
            <div style="text-align: center; margin-top: 24px; font-size: 14px;">
                <a href="@Url.Action("Index", "Home")" class="text-slate-500 hover:text-sky-600 transition-colors">
                    <i class="fas fa-arrow-left"></i> Quay lại trang chủ
                </a>
            </div>
        }
    </div>
</div>
